### 本项目主要用于解决由于外部因素导致的图像错位，帮助其进行矫正。

#### 本项目的图像矫正算法：
假设有一组图像(30张)，取其第一张作为模板，剩余其它图像(29张)用于匹配(跟第一张做比较)。
利用互相关算法计算待匹配图像与第一张图像的偏移量，偏移量有高偏移量和宽偏移量，分别代表需要偏移的像素点大小。
在算出其偏移量之后，对其进行偏移，偏移会产生部分像素点为0，所以需要进行裁剪，裁剪多少由用户自行决定(所以需要知道输出图像大小)，
从而达到矫正的效果。



#### 本项目的平台：Visual Studio2017
#### 外部库：opencv_world330+CUDA10.0  



### 工程项目介绍：
registrationGPU为源代码，用于调试，调试时请使用Debug调试。
registrationGPUDll为生成链接库代码，用于生成动态链接库。

不带GPU后缀的文件夹为C++源码。

Test项目为测试DLL是否生成成功，且可用。



### 使用方法：

将test*.cpp文件里的图像大小和张数以及路径修改为适用于自己的。

GPU版本的函数最后输入的一个参数是同时并行处理的图像张数。

函数为：registrationGPU(输入图像，输出图像，输入高，输入宽，输出高，输出宽，图像总张数，并行张数)

C++版本串行处理，用于电脑没有GPU显卡的情况。

函数为：registration(输入图像，输出图像，输入高，输入宽，输出高，输出宽，图像总张数)

## 最后

本项目是将matlab自带函数dftregistration())转化为对应的CUDA版本和C++版本。其中压缩比例usfac默认为100，本项目只提供usfac>1的情况，不提供usfac==1的情况。若想修改usfac参数，请在源代码里全局搜索dftregistration()，将默认参数100改为其它值x（x>1）

